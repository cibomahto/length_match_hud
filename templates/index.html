<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>KiCad Length Matching HUD</title>
    <link rel="stylesheet" type="text/css" href="/static/style.css">
    <script type="text/javascript" src="/static/index.js"></script>
</head>

<body>
    <div style="display: flex; flex-direction: column; height: 95vh;">
        <div style="flex: 0 0 auto; height: auto; overflow: visible;">
            <header>
            KiCad Length Matching HUD <span id="status-indicator"></span>
            </header>

            <form id="hud-form" class="hud-form">
            <label for="filter">Net name filter:</label>
            <input type="text" id="filter" name="filter" style="width: 400px;">

            <label for="netclass_filter">Netclass filter:</label>
            <select id="netclass_filter" name="netclass_filter" style="width: 400px;"></select>


            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button type="button" id="select-noncompliant">Select all noncompliant traces</button>
                <button type="button" id="clear-selection">Clear selection</button>
            </div>
            </form>
        </div>
        <div style="flex: 1 1 0; overflow: hidden; display: flex; flex-direction: column;">
            <div style="display: flex; border-bottom: 1px solid #ccc;">
                <button type="button" class="tab-btn" onclick="showTab('tab-rules')">Rules</button>
                <button type="button" class="tab-btn active" onclick="showTab('tab-matching')">Length Matching</button>
                
            </div>
            <div id="tab-rules" class="tab-content" style="display: none; flex: 1 1 0; overflow: auto; padding: 16px;">
                <!-- Rules content goes here -->
                <p>Rules tab content.</p>
                <div id="rules-content"></div>
            </div>
            <div id="tab-matching" class="tab-content" style="flex: 1 1 0; overflow: auto;">
                <table id="data-table">
                    <thead class="sticky-table-header">
                        <tr>
                            <th id="th-name">Net</th>
                            <th id="th-delay">Delay (ps)</th>
                            <th id="th-target-delay">Target (ps)</th>
                            <th id="th-diff">Difference (ps)</th>
                            <th id="th-top">Top (mm)</th>
                            <th id="th-in2">In2 (mm)</th>
                            <th id="th-in7">In7 (mm)</th>
                            <th id="th-bottom">Bottom (mm)</th>
                            <th id="th-vias">Vias</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                    </tbody>
                </table>
            </div>

        </div>
        <script>
            function showTab(tabId) {
                document.querySelectorAll('.tab-content').forEach(el => el.style.display = 'none');
                document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
                document.getElementById(tabId).style.display = 'block';
                const idx = tabId === 'tab-table' ? 0 : 1;
                document.querySelectorAll('.tab-btn')[idx].classList.add('active');
            }
        </script>
    </div>
    <script>
        loadIndexPage();
    </script>
</body>

</html>